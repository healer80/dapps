on:
  push:
    branches:
    - master
jobs:
  build:
    runs-on: ubuntu-latest
steps:
  - uses: actions/checkout@v2

  - name: Setup Node
    uses: actions/setup-node@v1
    with:
      node-version: '10.x'

  - uses: aquiladev/ipfs-action@v0.1.1
  id: upload
  with:
    path: ./build

  - uses: aquiladev/ipfs-action@v0.1.3
  id: pinata
  with:
    path: ./build
    service: pinata
    pinataKey: ${{ secrets.PINATA_KEY }}
    pinataSecret: ${{ secrets.PINATA_SECRET }}
    pinataPinName: {pin_name}

  - run: npm ci

  - run: npm run build